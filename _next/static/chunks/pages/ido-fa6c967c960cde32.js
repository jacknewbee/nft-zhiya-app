(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[477],{21178:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ido",function(){return e(39085)}])},25571:function(t,n,e){"use strict";e.d(n,{d:function(){return v}});var r=e(98788),u=e(70865),i=e(96670),a=e(50930),o=e(45680),s=e(43997),c=e(2784),l=e(38497),f=e(72579),d=e.n(f),h=e(12483),g=e(50071);function v(){var t,n=(0,l.Fh)(),e=(0,s.v9)(function(t){return t.user.gasPrice});return{callWithGasPrice:(0,c.useCallback)((t=(0,r.Z)(function(t,r){var s,c,l,f,v,S,p=arguments;return(0,o.__generator)(this,function(o){switch(o.label){case 0:return s=p.length>2&&void 0!==p[2]?p[2]:[],c=p.length>3&&void 0!==p[3]?p[3]:null,(0,h.n_)({type:"Transaction",message:e===g.j4.rpcDefault?"Call with market gas price":"Call with gas price: ".concat(n),data:{contractAddress:t.address,methodName:r,methodArgs:s,overrides:c}}),l=d()(t,r),f=null==c?void 0:c.gasPrice,[4,l.apply(void 0,(0,a.Z)(s).concat([f?(0,u.Z)({},c):(0,i.Z)((0,u.Z)({},c),{gasPrice:n})]))];case 1:return(v=o.sent())&&(0,h.n_)({type:"Transaction",message:"Transaction sent: ".concat(v.hash),data:{hash:v.hash,from:v.from,gasLimit:null===(S=v.gasLimit)||void 0===S?void 0:S.toString(),nonce:v.nonce}}),[2,v]}})}),function(n,e){return t.apply(this,arguments)}),[n,e])}}},39085:function(t,n,e){"use strict";e.r(n),e.d(n,{default:function(){return y}});var r=e(98788),u=e(87394),i=e(45680),a=e(52322),o=e(73921),s=e(8160),c=e(56521),l=e(78040),f=e(2784),d=e(81254),h=e(6391),g=e.n(h),v=e(90711),S=e(25130);e(39241);var p=e(86054),w=e(25571),m=e(90395),E=e(15602),_=e(517),Z=function(t,n){var e=(0,d.im)(n),u=(0,w.d)().callWithGasPrice;return{onApprove:(0,f.useCallback)((0,r.Z)(function(){return(0,i.__generator)(this,function(n){return[2,u(t,"approve",[e,v.Bz])]})}),[t,e,u])}},D=function(t,n,e){var u=(0,o.$G)().t,s=(0,_.mA)().address,c=(0,S.p)(),l=c.toastSuccess;c.toastError;var d=(0,m.Z)(),h=d.fetchWithCatchTxError;return{isPending:d.loading,handleApprove:(0,f.useCallback)((0,r.Z)(function(){var r;return(0,i.__generator)(this,function(i){switch(i.label){case 0:return[4,h(function(){return n.approve(t,v.Bz)})];case 1:return(null==(r=i.sent())?void 0:r.status)?(e(E.W.ENABLED),l(u("Success!"),(0,a.jsx)(p.Y,{txHash:r.transactionHash,children:u("Approve Success")}))):e(E.W.DISABLED),[2]}})}),[s,n,u,h,l])}},b=function(t,n,e){var u=(0,o.$G)().t,s=(0,_.mA)().address,c=(0,S.p)(),l=c.toastSuccess,d=c.toastError,h=(0,m.Z)(),v=h.fetchWithCatchTxError;return{isPending:h.loading,handleBuy:(0,f.useCallback)((0,r.Z)(function(){var r,o;return(0,i.__generator)(this,function(i){switch(i.label){case 0:return r=new(g())(t).multipliedBy(1e18).toString(),[4,v(function(){return e.buyToken(n,r)})];case 1:return(null==(o=i.sent())?void 0:o.status)?l(u("Success!"),(0,a.jsx)(p.Y,{txHash:o.transactionHash,children:u("Buy PRPI Success")})):d("Error",u("Up to 500 USDT can be purchased")),[2]}})}),[s,e,t,u,v,l])}},A=function(t){var n=(0,o.$G)().t,e=(0,_.mA)().address,u=(0,S.p)(),s=u.toastSuccess;u.toastError;var c=(0,m.Z)(),l=c.fetchWithCatchTxError;return{isPending:c.loading,handleClaim:(0,f.useCallback)((0,r.Z)(function(){var e;return(0,i.__generator)(this,function(r){switch(r.label){case 0:return[4,l(function(){return t.claim()})];case 1:return(null==(e=r.sent())?void 0:e.status)&&s(n("Success!"),(0,a.jsx)(p.Y,{txHash:e.transactionHash,children:n("Claim PRPI Success")})),[2]}})}),[e,t,n,l,s])}},I=e(90327),T=e(38497),B=e(46267),N=e(57535),x=e(26504),C=e(48858),y=function(){var t,n,e,h,v=(0,o.$G)().t,w=(0,I.Z)(),_=w.chainId,y=w.account,P=(0,u.Z)((0,f.useState)(!1),2),M=(P[0],P[1]),W=(0,u.Z)((0,f.useState)(""),2),F=W[0],L=W[1],k=(0,S.p)(),G=k.toastSuccess,H=k.toastError,j=(0,c.pM)((0,d.im)(_)),R=(0,u.Z)((0,f.useState)("0xFFC2e7d5a475308c503dd2a8861eC30458036b29"),2),Y=R[0],O=R[1];(0,T.Fh)(),(0,B.h7)();var U=(0,m.Z)(),$=U.fetchWithCatchTxError;U.loading;var q=(0,u.Z)((0,f.useState)(E.W.DISABLED),2),z=q[0],X=q[1],Q=(0,c.Ib)(null===(e=s.AA[_])||void 0===e?void 0:e.address),V=Z(Q,_).onApprove,J=(0,u.Z)((0,f.useState)(0),2),K=J[0],tt=J[1],tn=(0,u.Z)((0,f.useState)(0),2),te=tn[0],tr=tn[1],tu=(0,C.Z)(te).secondsRemaining,ti=(0,u.Z)((0,f.useState)(),2),ta=ti[0],to=ti[1],ts=(0,u.Z)((0,f.useState)("--"),2),tc=ts[0],tl=ts[1],tf=(0,u.Z)((0,f.useState)("--"),2),td=(tf[0],tf[1]),th=(0,u.Z)((0,f.useState)("--"),2),tg=(th[0],th[1]),tv=(0,u.Z)((0,f.useState)("--"),2),tS=(tv[0],tv[1]),tp=b(F,Y,j),tw=(tp.isPending,tp.handleBuy),tm=A(j).handleClaim,tE=D((0,d.im)(_),Q,X).handleApprove,t_=(0,l.ZP)(null===(h=s.AA[_])||void 0===h?void 0:h.address).balance;(0,r.Z)(function(){return(0,i.__generator)(this,function(t){switch(t.label){case 0:if(!y||!F)return[2];if(!(0,x.Tq)(K))return H("Error",v("IDO not started")),[2];if(30>parseInt(F))return H("Error",v("Need 30 USDT at least")),[2];if(!new(g())(t_.toString()).dividedBy(1e18).gte(new(g())(F)))return H("Error",v("not enough USDT")),[2];if(0==ta.hour&&0==ta.minute&&0==ta.seconds)return H("Error",v("IDO has ended")),[2];return[4,tw()];case 1:return t.sent(),L(""),M(!1),tD(),[2]}})}),(0,r.Z)(function(){return(0,i.__generator)(this,function(t){switch(t.label){case 0:if(z==E.W.IS_ENABLING)return[2];return X(E.W.IS_ENABLING),[4,tE()];case 1:return t.sent(),[2]}})}),(0,r.Z)(function(){return(0,i.__generator)(this,function(t){switch(t.label){case 0:if(!tc||0>=parseInt(tc))return[2];return[4,tm()];case 1:return t.sent(),tD(),[2]}})}),(0,r.Z)(function(){var t;return(0,i.__generator)(this,function(n){switch(n.label){case 0:if(!_||!y||z==E.W.IS_ENABLING)return[2];return[4,$(function(){return X(E.W.IS_ENABLING),V()})];case 1:return(null==(t=n.sent())?void 0:t.status)?(G(v("Successfully Enabled!"),(0,a.jsx)(p.Y,{txHash:t.transactionHash,children:v("You can now participate in the PRPI IDO.")})),X(E.W.ENABLED)):X(E.W.DISABLED),[2]}})});var tZ=(t=(0,r.Z)(function(){return(0,i.__generator)(this,function(t){switch(t.label){case 0:if(!j.signer)return[2];return[4,j.endDate()];case 1:return tr(t.sent().toNumber()),[4,j.startDate()];case 2:return tt(t.sent().toNumber()),[2]}})}),function(){return t.apply(this,arguments)}),tD=(n=(0,r.Z)(function(){var t,n;return(0,i.__generator)(this,function(e){switch(e.label){case 0:if(!j.signer)return[2];return[4,j.userRewards()];case 1:return t=e.sent(),tg(new(g())(t[2].toString()).dividedBy(1e18).toFixed(0)),tS(new(g())(t[1].toString()).dividedBy(1e8).toFixed(0)),[4,j.rewardPending()];case 2:return n=e.sent(),tl(new(g())(n[0].toString()).dividedBy(1e8).toFixed(0)),td(new(g())(t[0].toString()).minus(new(g())(n[0].toString())).dividedBy(1e8).toFixed(0)),[2]}})}),function(){return n.apply(this,arguments)});return(0,f.useEffect)(function(){X(E.W.DISABLED),N.mE&&O(N.mE)},[y]),(0,f.useEffect)(function(){tZ(),tD()},[j,y]),(0,f.useEffect)(function(){to((0,x.FZ)(tu))},[tu]),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{children:"asd"})})}},26504:function(t,n,e){"use strict";e.d(n,{FZ:function(){return a},S8:function(){return o},Tq:function(){return l},Ul:function(){return f},Yw:function(){return s},dN:function(){return d},gk:function(){return h},he:function(){return v},qV:function(){return c},tQ:function(){return g}});var r=e(10528),u=e(6391),i=e.n(u);function a(t){return{hour:Math.floor(t/3600),minute:Math.floor(t%3600/60),seconds:Math.floor(t%60)}}function o(t){return Math.floor((new Date().getTime()/1e3-t)/60)}function s(t,n){var e=new Date().getTime()/1e3;return(e>=n&&(e=n),t>=n)?0:Math.floor((e-t)/60)}function c(t){var n=t-new Date().getTime()/1e3;return console.log(Math.floor(n/60)+1,"getCooldownDay"),Math.floor(n/60)+1}function l(t){return new Date().getTime()/1e3>=t}function f(t){var n=new Date(1e3*t);return n.getFullYear()+"-"+(n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1)+"-"+(10>n.getDate()?"0"+n.getDate()+" ":n.getDate()+" ")+(10>n.getHours()?"0"+n.getHours()+":":n.getHours()+":")+(10>n.getMinutes()?"0"+n.getMinutes()+":":n.getMinutes()+":")+(10>n.getSeconds()?"0"+n.getSeconds():n.getSeconds())}function d(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:18;return t instanceof i()?t.div(Math.pow(10,e)).toFixed(n):t instanceof r.O$?new(i())(t.toString()).div(Math.pow(10,e)).toFixed(n):"--"}function h(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18;return new(i())(t).multipliedBy(Math.pow(10,n)).toString()}function g(t){return new(i())(t).lte(0)}function v(t){var n=new Date(t).getTime(),e=Date.now();return console.log(n,e),e>=n}},56359:function(t,n,e){"use strict";e.d(n,{I:function(){return r}});var r=function(){return Math.floor(Date.now()/1e3)}},15602:function(t,n,e){"use strict";var r,u;e.d(n,{W:function(){return r}}),(u=r||(r={})).ENABLED="enabled",u.DISABLED="disabled",u.IS_ENABLING="is_enabling"},48858:function(t,n,e){"use strict";e.d(n,{Z:function(){return c}});var r=e(87394),u=e(56359),i=function(t){var n,e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;n=new Date().getTime()+r;var u=function(){n+=r,e=setTimeout(u,n-new Date().getTime()),null==t||t()};return e=setTimeout(u,n-new Date().getTime()),{cancel:function(){return clearTimeout(e)}}},a=e(2784),o=e(92177),s=function(t){var n=(0,u.I)();return Number.isFinite(t)&&t>n?t-n:0},c=function(t){var n=(0,a.useRef)(null),e=(0,r.Z)((0,a.useState)(function(){return s(t)}),2),u=e[0],c=e[1],l=(0,r.Z)((0,a.useState)(!1),2),f=l[0],d=l[1],h=(0,o.yr)(),g=(0,a.useCallback)(function(){return d(!0)},[d]),v=(0,a.useCallback)(function(){return d(!1)},[d]);return(0,a.useEffect)(function(){var t;if(!f){var e=i(function(){c(function(t){var e;return t?t-1:(null===(e=n.current)||void 0===e||e.call(n),t)})}).cancel;t=e,n.current=e}return function(){null==t||t()}},[f,t,c]),(0,a.useEffect)(function(){h?(c(s(t)),v()):g()},[g,v,t,c,h]),{secondsRemaining:u,pause:g,unpause:v}}}},function(t){t.O(0,[9774,2888,179],function(){return t(t.s=21178)}),_N_E=t.O()}]);